{"version":3,"sources":["api/ajax.js","api/index.js","utils/storage.js","view/login/Login.jsx","component/leftnav/LeftNav.jsx","component/home/Home.jsx","component/category/Category.jsx","utils/file.js","component/product/Picture.jsx","component/product/AddProduct.jsx","component/product/ProductHome.jsx","component/product/Product.jsx","component/user/User.jsx","component/role/Role.jsx","component/bar/Bar.jsx","component/line/Line.jsx","component/pie/Pie.jsx","config/menusConfig.js","component/header/Header.jsx","view/admin/Admin.jsx","App.js","index.js"],"names":["axios","interceptors","response","use","res","data","url","method","Promise","resolve","get","params","post","then","reqLogin","userInfo","ajax","getAllCategory","removeImage","imageInfo","setStorage","user","localStorage","setItem","JSON","stringify","getStorage","parse","getItem","removeStorage","removeItem","Login","onFinish","values","a","status","msg","message","error","success","props","history","push","pathname","className","name","initialValues","username","password","this","Item","rules","min","max","required","prefix","UserOutlined","placeholder","LockOutlined","type","htmlType","block","React","Component","SubMenu","LeftNav","path","defaultSelectedKeys","location","match","length","defaultOpenKeys","slice","lastIndexOf","mode","theme","key","to","HomeOutlined","icon","AppstoreOutlined","title","BarsOutlined","ToolOutlined","SafetyCertificateOutlined","AreaChartOutlined","BarChartOutlined","LineChartOutlined","PieChartOutlined","withRouter","Home","Option","Category","showModal","setState","visible","confirmAdd","btnDom","current","click","cancelAdd","selectCategory","categoryId","addCategory","categoryName","state","showSortLevel","secondCategoryInfo","categorys","allCategory","setFirstCategory","map","item","addCategoryItem","secondCategorys","firstCategorys","_id","sortName","action","showSubCategories","record","shiftFirstCategory","showUpdataModal","isShowUpdataModal","updataCategoryInfo","okUpdataModal","categoryInfo","cancelUpdataModal","changeCategory","e","target","value","columns","dataIndex","width","render","text","onClick","createRef","ArrowRightOutlined","extra","PlusOutlined","pagination","defaultPageSize","dataSource","bordered","onOk","onCancel","defaultValue","style","onChange","display","ref","getBase64","file","reject","reader","FileReader","readAsDataURL","onload","result","onerror","Picture","previewVisible","previewImage","previewTitle","fileList","handleCancel","handlePreview","preview","originFileObj","substring","handleChange","uploadButton","listType","onPreview","footer","alt","src","AddProduct","allCategoryList","options","getAllCategoryList","setOptions","label","isLeaf","selectedOptions","console","log","loadData","targetOption","loading","setTimeout","children","layout","labelCol","span","wrapperCol","ArrowLeftOutlined","verticalAlign","marginRight","validateMessages","TextArea","changeOnSelect","offset","ProductHome","Product","component","exact","User","Role","Bar","Line","Pie","public","confirm","Header","weather","time","Date","toLocaleString","exitLogin","ExclamationCircleOutlined","Math","random","catch","getDayMsg","setLocalTime","resoleve","jsonp","err","results","weather_data","timer","setInterval","getMenuTitle","menu","i","menusConfig","clearInterval","wind","temperature","dayPictureUrl","getTitle","Footer","Sider","Content","Admin","height","margin","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a9641dd4.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\naxios.interceptors.response.use(res => res.data)\r\nexport default function (url, data = {}, method = 'get') {\r\n  let p = {}\r\n  return new Promise(resolve => {\r\n    if (method === 'get') {\r\n      p = axios.get(url, {\r\n        params: data\r\n      })\r\n    } else {\r\n      p = axios.post(url, data)\r\n    }\r\n    p.then(res => {\r\n      resolve(res)\r\n    })\r\n  })\r\n}","import ajax from './ajax'\r\nimport jsonp from 'jsonp';\r\n// 登录\r\nexport const reqLogin = (userInfo) => ajax('/login', userInfo, 'post')\r\n// 请求天气数据\r\nexport const reqWeather = () => {\r\n  const url = `http://api.map.baidu.com/telematics/v3/weather?location=%E5%85%AD%E7%9B%98%E6%B0%B4&output=json&ak=3p49MVra6urFRGOT9s8UBWr2&callback=__jp1`\r\n  return new Promise(resoleve => {\r\n    jsonp(url, (err, data) => {\r\n      if (data.status === 'success') {\r\n        resoleve(data.results[0].weather_data[0])\r\n      } else {\r\n        resoleve('获取天气失败')\r\n      }\r\n    })\r\n  })\r\n}\r\n// 添加分类\r\nexport const addCategory = (categoryInfo) => ajax('/addCategory', categoryInfo, 'post')\r\n// 获取分类数据\r\nexport const getAllCategory = () => ajax('/getAllCategory')\r\n// 修改分类名称\r\nexport const updataCategoryName = (categoryInfo) => ajax('/updataCategoryName', categoryInfo, 'post')\r\n// 删除商品图片\r\nexport const removeImage = (imageInfo) => ajax('/removeImage', imageInfo, 'post')\r\n","export const setStorage = (user) => {\r\n  localStorage.setItem('user', JSON.stringify(user))\r\n}\r\n\r\nexport const getStorage = () => {\r\n  return JSON.parse(localStorage.getItem('user')) || {}\r\n}\r\n\r\nexport const removeStorage = () => {\r\n  localStorage.removeItem('user')\r\n}","import React from 'react';\r\nimport './login.less'\r\nimport { Form, Input, Button, message } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport { reqLogin } from '../../api/index.js'\r\nimport { setStorage } from '../../utils/storage'\r\n\r\nexport default class Login extends React.Component {\r\n\r\n  onFinish = async values => {\r\n    // 点击button提交，检验通过时执行，并返回input数据\r\n    // values为input框的数据\r\n    const { status, msg, user } = await reqLogin(values)\r\n    if (!status) { // status=0 登录成功\r\n      message.success(msg)\r\n      setStorage(user)\r\n      this.props.history.push({ pathname: '/admin' })\r\n    } else {\r\n      message.error(msg)\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className='login-form'>\r\n        <h2 className='login-title'>后台管理系统</h2>\r\n        <Form\r\n          name=\"normal_login\"\r\n          initialValues={{ username: 'admin', password: '111' }}\r\n          onFinish={this.onFinish}\r\n        >\r\n          <Form.Item\r\n            name=\"username\"\r\n            rules={[\r\n              { min: 3, message: '用户名不能少于3位' },\r\n              { max: 12, message: '用户名不能多于12位' },\r\n              { required: true, message: '用户名不能为空' }\r\n            ]}\r\n          >\r\n            <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"用户名\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            name=\"password\"\r\n            rules={[\r\n              { min: 3, message: '密码不能少于3位' },\r\n              { max: 12, message: '密码不能多于12位' },\r\n              { required: true, message: '密码不能为空' }\r\n            ]}\r\n          >\r\n            <Input\r\n              prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n              type=\"password\"\r\n              placeholder=\"密码\"\r\n            />\r\n          </Form.Item>\r\n          <Form.Item>\r\n            <Button type='primary' htmlType=\"submit\" block >登录</Button>\r\n          </Form.Item>\r\n        </Form>\r\n\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport { Menu } from 'antd';\r\nimport { NavLink, withRouter } from 'react-router-dom'\r\nimport {\r\n  HomeOutlined,\r\n  AppstoreOutlined,\r\n  BarsOutlined,\r\n  AreaChartOutlined,\r\n  ToolOutlined,\r\n  UserOutlined,\r\n  SafetyCertificateOutlined,\r\n  PieChartOutlined,\r\n  BarChartOutlined,\r\n  LineChartOutlined\r\n} from '@ant-design/icons';\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftNav extends React.Component {\r\n\r\n  UNSAFE_componentWillMount() {\r\n    const path = this.defaultSelectedKeys = this.props.location.pathname\r\n    if (path === '/admin') this.defaultSelectedKeys = '/admin/home'\r\n    const _path = path.match(/\\//g)\r\n    if (_path.length === 3) this.defaultOpenKeys = path.slice(0, path.lastIndexOf('/'))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Menu\r\n        defaultSelectedKeys={[this.defaultSelectedKeys]}\r\n        defaultOpenKeys={[this.defaultOpenKeys]}\r\n        mode=\"inline\"\r\n        theme=\"dark\"\r\n      >\r\n        <Menu.Item key=\"/admin/home\"><NavLink to=\"/admin/home\"><HomeOutlined />首页</NavLink></Menu.Item>\r\n        <SubMenu key=\"/admin/products\" icon={<AppstoreOutlined />} title=\"商品\">\r\n          <Menu.Item key=\"/admin/products/category\"><BarsOutlined /><NavLink to=\"/admin/products/category\">分类管理</NavLink></Menu.Item>\r\n          <Menu.Item key=\"/admin/products/product\"><ToolOutlined /><NavLink to=\"/admin/products/product\">商品管理</NavLink></Menu.Item>\r\n        </SubMenu>\r\n        <Menu.Item key=\"/admin/user\"><UserOutlined /><NavLink to=\"/admin/user\">用户管理</NavLink></Menu.Item>\r\n        <Menu.Item key=\"/admin/role\"><SafetyCertificateOutlined /><NavLink to=\"/admin/role\">角色管理</NavLink></Menu.Item>\r\n        <SubMenu key=\"/admin/charts\" icon={<AreaChartOutlined />} title=\"图形图表\">\r\n          <Menu.Item key=\"/admin/charts/bar\"><BarChartOutlined /><NavLink to=\"/admin/charts/bar\">柱形图</NavLink></Menu.Item>\r\n          <Menu.Item key=\"/admin/charts/line\"><LineChartOutlined /><NavLink to=\"/admin/charts/line\">折线图</NavLink></Menu.Item>\r\n          <Menu.Item key=\"/admin/charts/pie\"><PieChartOutlined /><NavLink to=\"/admin/charts/pie\">饼图</NavLink></Menu.Item>\r\n        </SubMenu>\r\n      </Menu>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(LeftNav)","import React from 'react';\r\n\r\nexport default class Home extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Home\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport { Modal, Card, Button, Table, Select, Form, Input, message } from 'antd';\r\nimport { PlusOutlined, ArrowRightOutlined } from '@ant-design/icons';\r\nimport { addCategory, getAllCategory, updataCategoryName } from '../../api'\r\n\r\nconst { Option } = Select;\r\n\r\nexport default class Category extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      columns: [\r\n        {\r\n          title: '分类名称',\r\n          dataIndex: 'sortName',\r\n          key: 'sortName',\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'action',\r\n          key: 'action',\r\n          width: '30%',\r\n          render: (text, record) => {\r\n            return (\r\n              <span>\r\n                <Button type='link' onClick={() => { this.showUpdataModal(record) }}>{text[0]}</Button>\r\n                {!this.state.showSortLevel ? (<Button type='link' onClick={() => { this.showSubCategories(record) }}>{text[1]}</Button>) : ''}\r\n              </span>\r\n            )\r\n          }\r\n        },\r\n      ],\r\n      firstCategorys: [],\r\n      secondCategorys: [],\r\n      allCategory: [],\r\n      secondCategoryInfo: {}, // 手机被点击查看子分的那一行的数据\r\n      updataCategoryInfo: {}, // 收集被点击修改分类名的那一行的数据\r\n      visible: false,\r\n      isShowUpdataModal: false,\r\n      categoryId: '1', // 保存分类类型，比如选项框选择了分类时，保存其分类id\r\n      showSortLevel: 0 // 当前表格中展示的分类等级，0为一级分类，1为二级分类\r\n    }\r\n    this.btnDom = React.createRef()\r\n  }\r\n\r\n  UNSAFE_componentWillMount() {\r\n    this.getAllCategory('1')\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({ visible: true })\r\n  }\r\n\r\n  confirmAdd = () => { // 确定添加\r\n    this.btnDom.current.click() // 触发Form表单的submit按键提交数据，触发属性onFinish={this.addCategory}\r\n  };\r\n\r\n  cancelAdd = () => { // 取消添加\r\n    this.setState({ visible: false })\r\n  }\r\n\r\n  selectCategory = (categoryId) => { // 设置分类类型\r\n    this.setState({ categoryId })\r\n  }\r\n\r\n  addCategory = async ({ categoryName }) => { // 真正的添加分类代码逻辑\r\n    const { showSortLevel, secondCategoryInfo, categoryId } = this.state\r\n    // categoryName 输入分类的input的value值\r\n    this.setState({ visible: false })\r\n    const { status, msg } = await addCategory({ // 将数据传给后台保存\r\n      categoryId,\r\n      categoryName\r\n    })\r\n    if (!status) { // 添加成功 设置一级分类\r\n      message.success(msg)\r\n      // 添加一级分类，获取一级；添加二级分类，获取二级\r\n      showSortLevel ? this.getAllCategory(secondCategoryInfo.key) : this.getAllCategory('1')\r\n    } else {\r\n      message.error(msg)\r\n    }\r\n  }\r\n  getAllCategory = async (categoryId) => { // 从后台获取全部的分类数据\r\n    const { status, categorys } = await getAllCategory()\r\n    if (status) {\r\n      message.error('获取分类数据失败')\r\n      return\r\n    }\r\n    this.setState({ allCategory: categorys }, () => {\r\n      this.setFirstCategory(categoryId) // 设置一级分类\r\n    })\r\n  }\r\n\r\n\r\n  setFirstCategory = (categoryId) => { // categoryId----分类等级\r\n    const categorys = []\r\n    this.state.allCategory.map(item => { // 通过分类等级 设置对应的类别数据firstCategorys\r\n      if (item.categoryId === categoryId) {\r\n        this.addCategoryItem(categorys, item)\r\n      }\r\n    })\r\n    // 显示一级分类，更新一级分类数据firstCategorys；显示二级分类，更新一级分类数据secondCategorys\r\n    this.state.showSortLevel ? this.setState({ secondCategorys: categorys }) : this.setState({ firstCategorys: categorys })\r\n  }\r\n\r\n  addCategoryItem = (data, item) => { // 添加数据\r\n    data.push({\r\n      key: item._id,\r\n      sortName: item.categoryName,\r\n      action: ['修改分类名', '查看子分类']\r\n    })\r\n  }\r\n\r\n\r\n  showSubCategories = (record) => {// 展示二级分类数据\r\n    // record 当前点击行的所有数据\r\n    this.setState({\r\n      secondCategoryInfo: record,\r\n      categoryId: record.key,\r\n      showSortLevel: 1\r\n    }, () => {\r\n      this.setFirstCategory(record.key)\r\n    })\r\n  }\r\n\r\n  shiftFirstCategory = () => { // 切换 一级分类\r\n    this.setState({ showSortLevel: 0 }, () => {\r\n      this.setFirstCategory('1')\r\n    })\r\n  }\r\n\r\n  showUpdataModal = (record) => {\r\n    this.setState({ isShowUpdataModal: true, updataCategoryInfo: record, })\r\n  }\r\n\r\n  okUpdataModal = async () => {\r\n    const { updataCategoryInfo, showSortLevel, secondCategoryInfo } = this.state\r\n    this.setState({ isShowUpdataModal: false })\r\n    const { status, msg } = await updataCategoryName({\r\n      _id: updataCategoryInfo.key,\r\n      categoryId: secondCategoryInfo.key ? secondCategoryInfo.key : '1',\r\n      categoryName: updataCategoryInfo.sortName,\r\n    })\r\n    if (status) {\r\n      message.error(msg)\r\n    } else {\r\n      message.success(msg)\r\n      showSortLevel ? this.getAllCategory(secondCategoryInfo.key) : this.getAllCategory('1')\r\n    }\r\n  }\r\n\r\n  cancelUpdataModal = () => {\r\n    this.setState({ isShowUpdataModal: false })\r\n  }\r\n\r\n  changeCategory = (e) => {\r\n    const updataCategoryInfo = { ...this.state.updataCategoryInfo }\r\n    updataCategoryInfo.sortName = e.target.value\r\n    this.setState({ updataCategoryInfo })\r\n  }\r\n\r\n  render() {\r\n    const { columns, visible, isShowUpdataModal, firstCategorys, secondCategorys, showSortLevel, secondCategoryInfo, categoryId, updataCategoryInfo } = this.state\r\n    return (\r\n      <div>\r\n        <Card title={!showSortLevel ? \"一级分类\" : (\r\n          <span>\r\n            <Button type='link' onClick={this.shiftFirstCategory}>一级分类</Button>\r\n            <ArrowRightOutlined />{secondCategoryInfo.sortName}\r\n          </span>\r\n        )} extra={<Button type='primary' onClick={this.showModal}><PlusOutlined />添加分类</Button>}>\r\n          <Table pagination={{ defaultPageSize: 3 }} columns={columns} dataSource={showSortLevel ? secondCategorys : firstCategorys} bordered />\r\n        </Card>\r\n        <Modal\r\n          title=\"添加分类\"\r\n          visible={visible}\r\n          onOk={this.confirmAdd}\r\n          onCancel={this.cancelAdd}\r\n        >\r\n          <Form\r\n            name=\"normal_login\"\r\n            onFinish={this.addCategory}\r\n          >\r\n            <Form.Item>\r\n              <Select defaultValue={categoryId} style={{ width: '100%' }} onChange={this.selectCategory}>\r\n                <Option value='1'>一级分类</Option>\r\n                {firstCategorys.map(item => (<Option value={item.key} key={item.key}>{item.sortName}</Option>))}\r\n              </Select>\r\n            </Form.Item>\r\n            <Form.Item\r\n              name=\"categoryName\"\r\n              rules={[\r\n                { required: true, message: '分类名称不能为空' }\r\n              ]}\r\n            >\r\n              <Input type=\"text\" placeholder=\"请输入分类名称\" />\r\n            </Form.Item>\r\n            <Form.Item style={{ display: 'none' }}>\r\n              <Button type='default' htmlType='submit' ref={this.btnDom} />\r\n            </Form.Item>\r\n          </Form>\r\n        </Modal>\r\n        <Modal\r\n          title=\"添加分类\"\r\n          visible={isShowUpdataModal}\r\n          onOk={this.okUpdataModal}\r\n          onCancel={this.cancelUpdataModal}\r\n        >\r\n          <Input type=\"text\" value={updataCategoryInfo.sortName} onChange={this.changeCategory} placeholder=\"请输入分类名称\" />\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}","export function getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}","import React from 'react';\r\nimport { Upload, Modal, message } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport { getBase64 } from '../../utils/file.js'\r\nimport { removeImage } from '../../api/index'\r\n\r\nexport default class Picture extends React.Component {\r\n  state = {\r\n    previewVisible: false, // 控制预览图片的modal\r\n    previewImage: '', // 预览图片的url\r\n    previewTitle: '', // 预览modal的标题\r\n    fileList: [],\r\n  };\r\n\r\n  handleCancel = () => this.setState({ previewVisible: false });\r\n\r\n  handlePreview = async file => { // 点击预览按键的处理函数\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n      previewTitle: file.name || file.url.substring(file.url.lastIndexOf('/') + 1),\r\n    });\r\n  };\r\n\r\n  handleChange = async ({ file, fileList }) => { // 处理上传\r\n    /*\r\n      file图片信息对象: { \r\n        status:\r\n          done 上传完成\r\n          uploading 上传中\r\n          removed 图片删除\r\n      }\r\n    */\r\n    const { status, response } = file\r\n    if (status === 'done') {\r\n      // file 上传的图片信息\r\n      file = fileList[fileList.length - 1]\r\n      const { msg, data } = response\r\n      message.success(msg)\r\n      file.name = data.name\r\n      file.url = data.url\r\n    }\r\n    else if (status === 'removed') {\r\n      // file 删除的图片信息\r\n      const { status, msg } = await removeImage({ name: file.name })\r\n      status || message.success(msg)\r\n    }\r\n\r\n    this.setState({ fileList }); // 更新图片数组\r\n  }\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList, previewTitle } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <PlusOutlined />\r\n        <div className=\"ant-upload-text\">Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"clearfix\">\r\n        <Upload\r\n          action=\"/upload/image\"\r\n          listType=\"picture-card\" // 图片显示样式\r\n          fileList={fileList}\r\n          name='image' // 图片上传后台时需要设置name属性,并且与后台对应\r\n          onPreview={this.handlePreview}\r\n          onChange={this.handleChange}\r\n        >\r\n          {fileList.length >= 3 ? null : uploadButton}\r\n        </Upload>\r\n        <Modal\r\n          visible={previewVisible}\r\n          footer={null}\r\n          onCancel={this.handleCancel}\r\n        >\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport { Switch, NavLink } from 'react-router-dom'\r\nimport { Card, Button, Select, Form, Input, message, InputNumber, Cascader } from 'antd';\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\nimport { addCategory, getAllCategory, updataCategoryName } from '../../api'\r\nimport Picture from './Picture';\r\n\r\nexport default class AddProduct extends React.Component {\r\n  state = {\r\n    allCategoryList: [],\r\n    options: []\r\n  };\r\n  UNSAFE_componentWillMount() {\r\n    this.getAllCategoryList()\r\n  }\r\n\r\n  getAllCategoryList = async () => { // 获取所有分类数据\r\n    const { status, categorys } = await getAllCategory()\r\n    if (status) {\r\n      message.error('获取分类失败。')\r\n      return\r\n    }\r\n    this.setState({ allCategoryList: categorys })\r\n    this.setState({ options: this.setOptions('1') })\r\n  }\r\n\r\n  setOptions = (categoryId) => { // 返回级联选择器的options数据值\r\n    const options = []\r\n    this.state.allCategoryList.map(item => {\r\n      if (item.categoryId === categoryId)\r\n        options.push({\r\n          value: item.categoryName,\r\n          label: item.categoryName,\r\n          isLeaf: categoryId === '1' ? false : true,\r\n          categoryId: item.categoryId,\r\n          _id: item._id\r\n        })\r\n    })\r\n    return options\r\n  }\r\n\r\n\r\n  onChange = (value, selectedOptions) => {\r\n    console.log(value, selectedOptions);\r\n  };\r\n\r\n  loadData = selectedOptions => { // 级联选择器选择时触发\r\n    const targetOption = selectedOptions[selectedOptions.length - 1];\r\n    targetOption.loading = true;\r\n    setTimeout(() => {\r\n      targetOption.loading = false;\r\n      const children = this.setOptions(targetOption._id)\r\n      targetOption.children = children\r\n      this.setState({\r\n        options: [...this.state.options],\r\n      });\r\n    }, 1000);\r\n  };\r\n\r\n  onFinish = values => {\r\n    console.log(values);\r\n  };\r\n\r\n  render() {\r\n    const layout = {\r\n      labelCol: { span: 8 },\r\n      wrapperCol: { span: 10 },\r\n    };\r\n    const validateMessages = {\r\n      required: '${label}不能为空',\r\n    };\r\n    return (\r\n      <Card title={<span>\r\n        <NavLink to='/admin/products/product'><ArrowLeftOutlined style={{ verticalAlign: 'middle', marginRight: 10 }} /></NavLink>\r\n        <span>添加商品页面</span>\r\n      </span>}>\r\n        <Form {...layout} name=\"nest-messages\" onFinish={this.onFinish} validateMessages={validateMessages}>\r\n          <Form.Item name={['user', 'productName']} label=\"商品名称\" rules={[{ required: true }]}>\r\n            <Input placeholder='请输入商品名称' />\r\n          </Form.Item>\r\n          <Form.Item name={['user', 'productDesc']} label=\"商品描述\" >\r\n            <Input.TextArea placeholder='请输入商品描述' />\r\n          </Form.Item>\r\n          <Form.Item name={['user', 'productPrice']} label=\"商品价格\" rules={[{ required: true }]}>\r\n            <Input placeholder='请输入商品价格' />\r\n          </Form.Item>\r\n          <Form.Item name={['user', 'productCategory']} label=\"商品分类\" rules={[{ required: true }]}>\r\n            {/* <Input placeholder='请选择商品分类' /> */}\r\n            <Cascader\r\n              options={this.state.options}\r\n              loadData={this.loadData}\r\n              onChange={this.onChange}\r\n              placeholder='请选择商品分类'\r\n              changeOnSelect\r\n            />\r\n          </Form.Item>\r\n          <Form.Item name={['user', 'productPicture']} label=\"商品图片\">\r\n            <Picture />\r\n          </Form.Item >\r\n\r\n          <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 8 }}>\r\n            <Button type=\"primary\" htmlType=\"submit\">提交</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport { Card, Button, Table, message } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\n\r\nexport default class ProductHome extends React.Component {\r\n  render() {\r\n    const columns = [\r\n      {\r\n        title: '商品名称',\r\n        dataIndex: 'productName',\r\n        key: 'productName',\r\n      },\r\n      {\r\n        title: '商品描述',\r\n        dataIndex: 'productDesc',\r\n        key: 'productDesc',\r\n      },\r\n      {\r\n        title: '商品价格',\r\n        dataIndex: 'productPrice',\r\n        key: 'productPrice',\r\n      },\r\n      {\r\n        title: '操作类型',\r\n        dataIndex: 'action',\r\n        key: 'action',\r\n        render: (text, record) => {\r\n          return (\r\n            <span>\r\n              <Button type='link'>详情</Button>\r\n              <Button type='link' >修改</Button>\r\n            </span>\r\n          )\r\n        }\r\n      },\r\n    ], data = []\r\n    return (\r\n      <Card title={\"商品\"} extra={<Button type='primary' onClick={() => this.props.history.push({ pathname: '/admin/products/product/add' })}><PlusOutlined />添加商品</Button>}>\r\n        <Table pagination={{ defaultPageSize: 3 }} columns={columns} dataSource={data} bordered />\r\n      </Card>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport { Switch, Route } from 'react-router-dom'\r\nimport AddProduct from './AddProduct';\r\nimport ProductHome from './ProductHome';\r\n\r\nexport default class Product extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route path='/admin/products/product/add' component={AddProduct}></Route>\r\n        <Route path='/admin/products/product' exact component={ProductHome}></Route>\r\n      </Switch>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class User extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        User\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Role extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Role\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Bar extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Bar\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Line extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Line\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\n\r\nexport default class Pie extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        Pie\r\n      </div>\r\n    )\r\n  }\r\n}","export default [\r\n    {\r\n        title: '首页', // 菜单标题名称\r\n        key: '/admin/home', // 对应的path\r\n        public: true,//该权限开放给所有用户\r\n    },\r\n    {\r\n        title: '商品',\r\n        key: '/admin/products',\r\n        children: [ // 子菜单列表\r\n            {\r\n                title: '分类管理',\r\n                key: '/admin/products/category',\r\n            },\r\n            {\r\n                title: '商品管理',\r\n                key: '/admin/products/product',\r\n            }\r\n        ]\r\n    },\r\n\r\n    {\r\n        title: '用户管理',\r\n        key: '/admin/user',\r\n    },\r\n    {\r\n        title: '角色管理',\r\n        key: '/admin/role',\r\n\r\n    },\r\n\r\n    {\r\n        title: '图形图表',\r\n        key: '/admin/charts',\r\n        children: [\r\n            {\r\n                title: '柱形图',\r\n                key: '/admin/charts/bar',\r\n            },\r\n            {\r\n                title: '折线图',\r\n                key: '/admin/charts/line',\r\n            },\r\n            {\r\n                title: '饼图',\r\n                key: '/admin/charts/pie',\r\n            },\r\n        ]\r\n    }\r\n]","import React from 'react';\r\nimport './header.less'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Modal, Button, message } from 'antd';\r\nimport { getStorage, removeStorage } from '../../utils/storage'\r\nimport { reqWeather } from '../../api/index';\r\nimport menusConfig from '../../config/menusConfig'\r\nimport { ExclamationCircleOutlined } from '@ant-design/icons';\r\n\r\nconst { confirm } = Modal;\r\n\r\nclass Header extends React.Component {\r\n\r\n  state = {\r\n    weather: {},\r\n    time: new Date().toLocaleString(),\r\n  }\r\n\r\n  UNSAFE_componentWillMount() {\r\n    this.user = getStorage()\r\n    this.getDayMsg()\r\n    this.setLocalTime()\r\n  }\r\n\r\n  async getDayMsg() { // 获取天气\r\n    const weather = await reqWeather()\r\n    this.setState({ weather })\r\n  }\r\n\r\n  setLocalTime() { // 设置时间\r\n    this.timer = setInterval(() => {\r\n      this.setState({\r\n        time: new Date().toLocaleString()\r\n      })\r\n    }, 1000)\r\n  }\r\n\r\n  getTitle() { // 获取标题\r\n    const pathname = this.props.location.pathname\r\n    let title = '';\r\n    (function getMenuTitle(menu) {\r\n      for (let i = 0; i < menu.length; i++) {\r\n        if (menu[i].children) getMenuTitle(menu[i].children)\r\n        else if (menu[i].key === pathname) title = menu[i].title\r\n      }\r\n    })(menusConfig)\r\n    return title\r\n  }\r\n\r\n  exitLogin = () => {\r\n    confirm({\r\n      title: '确定退出登录？',\r\n      icon: <ExclamationCircleOutlined />,\r\n      onOk: () => {\r\n        return new Promise((resolve, reject) => {\r\n          setTimeout(() => {\r\n            message.success('已退出登录。')\r\n            removeStorage()\r\n            this.props.history.push({ pathname: '/login' })\r\n            Math.random() > 0.5 ? resolve() : reject()\r\n          }, 1000);\r\n        }).catch(() => console.log('Oops errors!'));\r\n      },\r\n      onCancel() { },\r\n    });\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.timer) // 清除时间定时器\r\n  }\r\n\r\n  render() {\r\n    const { username } = this.user\r\n    const { time } = this.state\r\n    const { weather, wind, temperature, dayPictureUrl } = this.state.weather\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-top\">\r\n          <span>欢迎,{username}</span>\r\n          <Button type='link' onClick={this.exitLogin}>退出</Button>\r\n        </div>\r\n        <div className=\"header-bottom\">\r\n          <span className=\"header-bottom-left\">{this.getTitle()}</span>\r\n          <div className=\"header-bottom-right\">\r\n            <span>{time}</span>\r\n            <img src={dayPictureUrl} alt=\"\" />\r\n            <span>{weather}</span>\r\n            <span>{temperature}</span>\r\n            <span>{wind}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Header)","import React from 'react';\r\nimport { getStorage } from '../../utils/storage'\r\nimport { Layout } from 'antd'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport LeftNav from '../../component/leftnav/LeftNav'\r\nimport Home from '../../component/home/Home'\r\nimport Category from '../../component/category/Category'\r\nimport Product from '../../component/product/Product'\r\nimport User from '../../component/user/User'\r\nimport Role from '../../component/role/Role'\r\nimport Bar from '../../component/bar/Bar'\r\nimport Line from '../../component/line/Line'\r\nimport Pie from '../../component/pie/Pie'\r\nimport Header from '../../component/header/Header'\r\n\r\nconst { Footer, Sider, Content } = Layout;\r\n\r\nexport default class Admin extends React.Component {\r\n  render() {\r\n    const user = getStorage('user')\r\n    if (user._id) {\r\n      return (\r\n        <Layout style={{ height: '100%' }}>\r\n          <Sider>\r\n            <LeftNav />\r\n          </Sider>\r\n          <Layout>\r\n            <Header />\r\n            <Content>\r\n              <div className=\"site-card-border-less-wrapper\" style={{ margin: 20 }}>\r\n                <Switch>\r\n                  <Route path=\"/admin/home\" component={Home}></Route>\r\n                  <Route path=\"/admin/products/category\" component={Category}></Route>\r\n                  <Route path=\"/admin/products/product\" component={Product}></Route>\r\n                  <Route path=\"/admin/user\" component={User}></Route>\r\n                  <Route path=\"/admin/role\" component={Role}></Route>\r\n                  <Route path=\"/admin/charts/bar\" component={Bar}></Route>\r\n                  <Route path=\"/admin/charts/line\" component={Line}></Route>\r\n                  <Route path=\"/admin/charts/pie\" component={Pie}></Route>\r\n                  <Redirect to='/admin/home' />\r\n                </Switch>\r\n              </div>\r\n            </Content>\r\n            <Footer>Footer</Footer>\r\n          </Layout>\r\n        </Layout>\r\n      )\r\n    }\r\n    else return (<Redirect to='login'></Redirect>)\r\n  }\r\n}","import React from 'react';\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom'\nimport Login from './view/login/Login'\nimport Admin from './view/admin/Admin'\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path='/login' component={Login}></Route>\n        <Route path='/admin' component={Admin}></Route>\n        <Redirect to='/login' />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './static/css/reset.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}